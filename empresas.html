  <!DOCTYPE html>
  <html lang="pt-br">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Selo Verde - Empresas Sustentáveis</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css">
    <link rel="shortcut icon" href="/img/SeloVerde2.png" type="image/x-icon">
    <style>
      * { margin: 0; padding: 0; box-sizing: border-box; }
      body { font-family: 'Poppins', sans-serif; background: linear-gradient(to bottom, #ecfaf3, #e3f2fd); color: #333; line-height: 1.6; }
      header { background: rgba(255, 255, 255, 0.9); display: flex; justify-content: space-between; align-items: center; padding: 1rem 3rem; box-shadow: 0 5px 15px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 1000; backdrop-filter: blur(10px); }
      header h1 { font-weight: 700; font-size: 1.8rem; color: #2e7d32; transition: transform 0.3s; }
      header h1:hover { transform: scale(1.05); }
      nav ul { display: flex; gap: 2rem; list-style: none; }
      nav a { color: #2e7d32; text-decoration: none; font-weight: 600; transition: color 0.3s, transform 0.3s; }
      nav a:hover { color: #000; transform: scale(1.1); }
      .logo-container { display: flex; align-items: center; gap: 0.8rem; text-decoration: none; }
      .logo-img { width: 50px; transition: transform 0.3s; }
      .logo-img:hover { transform: rotate(10deg) scale(1.05); }
      .hero { text-align: center; padding: 4rem 2rem; background: linear-gradient(to right, #4caf50, #66bb6a); color: #fff; border-radius: 0 0 8% 8% / 12%; animation: fadeIn 1.2s ease-in-out; }
      .hero h2 { font-size: 3rem; margin-bottom: 1rem; }
      .hero p { font-size: 1.2rem; margin-bottom: 2rem; }
      .hero button { padding: 0.75rem 2rem; background: #2e7d32; color: #fff; border: none; border-radius: 30px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 8px rgba(0,0,0,0.2); }
      .hero button:hover { background: #1b5e20; transform: scale(1.1); }
      .content { padding: 2rem; text-align: center; animation: fadeIn 1.5s ease-in-out; }
      .filtros { display: flex; justify-content: center; gap: 1rem; margin-bottom: 2rem; flex-wrap: wrap; width: 100%; max-width: 900px; margin: 30px auto; margin-top: -0.3%;}
      .filtros input, .filtros select { flex-grow: 1; font-weight: bold; padding: 0.7rem; border-radius: 30px; border: 2px solid #cecece8f; transition: all 0.3s ease; outline: none; min-width: 200px; max-width: 200px; text-align: left; }
      .filtros input:focus, .filtros select:focus { border-color: #c2c2c23f; box-shadow: 0 0 8px rgba(32, 32, 32, 0.277); }
      .filtros select { font-weight: bold; padding: 0.7rem; border-radius: 30px; border: 2px solid #cecece8f; transition: all 0.3s ease; outline: none; background-color: white; cursor: pointer; position: relative; appearance: none; -webkit-appearance: none; -moz-appearance: none; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
      .filtros select:focus { border-color: #c2c2c23f; box-shadow: 0 0 8px rgba(32, 32, 32, 0.277); }
      .filtros select option { font-weight: bold; background: white; color: #333; padding: 10px; transition: background 1s, color 0.3s; }
      .filtros select option:hover { border: 2px solid #cecece8f; color: white; }
      .filtros select::-webkit-scrollbar { width: 8px; background-color: #f6f6f6; }
      .filtros select::-webkit-scrollbar-thumb { background-color: #59595987; border-radius: 10px; }
      .empresas-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; }
      .empresa-card { background: #fff; padding: 1.5rem; border-radius: 16px; box-shadow: 0 4px 16px rgba(0,0,0,0.08); text-align: center; transition: transform 0.3s, box-shadow 0.3s; }
      .empresa-card:hover { transform: translateY(-10px); box-shadow: 0 8px 24px rgba(0,0,0,0.15); }
      .empresa-logo { width: 100%; border-radius: 16px; height: 150px; object-fit: contain; }
      .empresa-detalhes { text-align: left; display: flex; flex-direction: column; align-items: start; padding: 1rem; }
      .popup { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); justify-content: center; align-items: center; z-index: 1000; }
      .popup-content { background: #fff; padding: 2rem; border-radius: 16px; width: 90%; max-width: 600px; position: relative; animation: fadeIn 0.5s ease-in-out; }
      .close-btn { position: absolute; top: 10px; right: 20px; background: transparent; border: none; font-size: 2rem; cursor: pointer; transition: transform 0.3s; }
      .close-btn:hover { transform: rotate(90deg); }
      footer { text-align: center; padding: 3rem; background: #2e7d32; color: #fff; border-radius: 5% 5% 0 0 / 10%; }
      .ver-mais-btn { font-weight: bold; margin-top: 0.5rem; padding: 0.5rem 1rem; border: none; background: #2e7d32; color: #fff; border-radius: 30px; border: 1.6px solid#2e7d32; cursor: pointer; transition: all 0.3s; }
      .ver-mais-btn:hover { background: #88ce8e41; color: #000; transform: scale(1.1); }
      .banner-container { display: flex; justify-content: center; margin: 20px auto; max-width: 90%; }
      .banner-img { animation: fadeIn 1.2s ease-in-out; width: 95%; border-radius: 18px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5); }
      .filtros select#organizarPor, .filtros select#buscaSegmento { text-align: center; text-align-last: center; color: #636363; }
      .filtros input { padding-left: 15px; }
      .search-wrapper { position: relative; width: 100%; max-width: 200px; }
      .search-icon-img { position: absolute; top: 50%; left: 1rem; transform: translateY(-50%); width: 18px; height: 18px; pointer-events: none; opacity: 0.5; }
      #buscaNome { width: 100%; padding-left: 2.6rem !important; /* espaço para a lupa */}
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(-20px); }
        to { opacity: 1; transform: translateY(0); }
      }
      @media (max-width: 768px) {
      nav ul {
        display: none;
        flex-direction: column;
        background-color: white;
        position: absolute;
        top: 70px;
        right: 0;
        width: 200px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      }

      nav ul.show {
        display: flex;
      }

      .menu-toggle {
        display: block;
        cursor: pointer;
        font-size: 1.5rem;
        color: #2e7d32;
      }
    }
    </style>
  </head>
  <body>
    <header>
      <a href="index.html" class="logo-container">
        <img href="SeloVerde.html" src="/img/SeloVerde2.png" alt="Logo Selo Verde" class="logo-img" style="width:50px; height:auto; ">
        <h1>Selo Verde</h1>
      </a>

      <div class="menu-toggle" onclick="toggleMenu()">☰</div>

      <nav>
        <ul>
          <li><a href="index.html">Início</a></li>
          <li><a href="empresas.html">Empresas</a></li>
          <li><a href="comparacao.html">Comparação</a></li>
          <li><a href="sobre.html">Sobre nós</a></li>
          <li><a href="news.html">News</a></li>
        </ul>
      </nav>
    </header>

    <div class="banner-container">
      <video class="banner-img" autoplay loop muted playsinline>
        <source src="/img/SV v4.mp4" type="video/mp4">
        Seu navegador não suporta o elemento de vídeo.
      </video>
    </div>

    <main class="content">
      <h2>Empresas Sustentáveis</h2>
      <p>Aqui você encontrará uma lista de empresas que se destacam pela sustentabilidade.</p><br>

      <div class="filtros">
        <div class="search-wrapper">
          <img src="/img/LupaPesquisa.png" alt="Ícone de Lupa" class="search-icon-img">
          <input type="text" id="buscaNome" placeholder="Buscar por nome...">
        </div>
        <select id="organizarPor">
          <option value="">Organização por... ▾</option>
          <option value="nome">Ordem Alfabética</option>
          <option value="nota">Nota Verde</option>
          <option value="ranking">Ranking no Brasil</option>
        </select>
        <select id="buscaSegmento">
          <option value="">Todos os Segmentos ▾</option>
          <option value="Alimentos">Alimentos</option>
          <option value="Bebidas">Bebidas</option>
          <option value="Agronegócio">Agronegócio</option>
          <option value="Bancário">Bancário</option>
          <option value="Petróleo">Petróleo</option>
          <option value="Energia">Energia</option>
          <option value="Mineração">Mineração</option>
          <option value="Atacado e Varejo">Atacado e Varejo</option>
          <option value="Seguradoras">Seguradoras</option>
          <option value="Telecomunicações">Telecomunicações</option>
          <option value="Serviços de Saúde">Serviços de Saúde</option>
          <option value="Cooperativas">Cooperativas</option>
          <option value="Papel e Celulose">Papel e Celulose</option>
          <option value="Operadoras de Planos de Saúde">Planos de Saúde</option>
          <option value="Eletroeletronicos">Eletroeletronicos</option>
          <option value="Farmacêutico">Farmacêutico</option>
          <option value="Serviços Logísticos">Serviços Logísticos</option>
          <option value="Saneamento">Saneamento</option>
          <option value="Mídia e Entretenimento">Mídia e Entretenimento</option>
          <option value="Serviços Financeiros">Serviços Financeiros</option>
        </select>
      </div>

      <div class="empresas-container" id="lista-empresas"></div>

      <div class="popup" id="popup">
        <div class="popup-content" id="popup-content">
          <button class="close-btn" onclick="fecharPopup()">&times;</button>
          <div id="popup-detalhes"></div>
        </div>
      </div>
    </main>

    <footer>
      <p>&copy; 2025 Selo Verde - Promovendo escolhas sustentáveis.</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
    <script>
      const SUPABASE_URL = "https://aczfdalfyyognsrbqkqy.supabase.co";
      const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFjemZkYWxmeXlvZ25zcmJxa3F5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg3MTI4MzcsImV4cCI6MjA2NDI4ODgzN30.0O6eadNKZ7m37IRW7dO-9_9rXPVZWZBhJdfyiGcLZCI";
      const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

      let empresasDB = [];

      async function carregarEmpresas() {
        const { data, error } = await supabase
          .from('selo-verde')
          .select('*')
          .order('ranking', { ascending: true });

        if (error) {
          console.error("Erro ao carregar empresas:", error);
          return;
        }

        console.log("Empresas carregadas:", data); // <-- Adicione isso!
        empresasDB = data;
        renderizarEmpresas(empresasDB);

        empresasDB = data;
        renderizarEmpresas(empresasDB);
      }

      function renderizarEmpresas(lista) {
        const container = document.getElementById('lista-empresas');
        container.innerHTML = '';
        lista.forEach((empresa) => {
          const div = document.createElement('div');
          div.className = 'empresa-card';
          div.innerHTML = `
            <img src="${empresa.logo}" alt="${empresa.nome}" class="empresa-logo">
            <div class="empresa-info">
              <h3>${empresa.nome}</h3>
              <p>Ranking: ${empresa.ranking}º maior do Brasil</p>
              <p>Nota Verde: ${empresa.notaVerde}</p>
              <p>Segmento: ${empresa.segmento}</p>
              <button class="ver-mais-btn" onclick="abrirPopup('${empresa.nome.replace(/'/g, "\\'")}')">Ver Mais</button>
            </div>
          `;
          container.appendChild(div);
        });
      }

      function abrirPopup(nome) {
        const empresa = empresasDB.find(e => e.nome === nome);
        if (!empresa) return;

        const popupDetalhes = document.getElementById('popup-detalhes');
        popupDetalhes.innerHTML = `
          <h3>${empresa.nome}</h3>
          <a href="${empresa.link}" target="_blank">
            <img src="${empresa.logo}" alt="${empresa.nome}" class="empresa-logo" style="height: 200px; padding: 0.8rem; cursor: pointer;">
          </a>
          <div class="empresa-detalhes">
            <p><strong>Ranking:</strong> ${empresa.ranking}</p>
            <p><strong>Segmento:</strong> ${empresa.segmento}</p>
            <p><strong>Selos e Certificados Ambientais:</strong> ${empresa.selo}</p>
            <p><strong>Política de Sustentabilidade:</strong> ${empresa.politica}</p>
            <p><strong>Processos Sustentáveis:</strong> ${empresa.processos}</p>
            <p><strong>Outras Informações:</strong> ${empresa.outras}</p>
          </div>
        `;
        document.getElementById('popup').style.display = 'flex';
      }

      function fecharPopup() {
        document.getElementById('popup').style.display = 'none';
      }

      function aplicarFiltros() {
        const nomeFiltro = document.getElementById('buscaNome').value.toLowerCase();
        const segmentoFiltro = document.getElementById('buscaSegmento').value;
        const ordenarPor = document.getElementById('organizarPor').value;

        let filtradas = empresasDB.filter(empresa => 
          empresa.nome.toLowerCase().includes(nomeFiltro) &&
          (segmentoFiltro === "" || empresa.segmento === segmentoFiltro)
        );

        if (ordenarPor === "nome") {
          filtradas.sort((a, b) => a.nome.localeCompare(b.nome));
        } else if (ordenarPor === "nota") {
          filtradas.sort((a, b) => b.notaVerde - a.notaVerde);
        } else if (ordenarPor === "ranking") {
          filtradas.sort((a, b) => a.ranking - b.ranking);
        }

        renderizarEmpresas(filtradas);
      }

      document.getElementById('organizarPor').addEventListener('change', aplicarFiltros);
      document.getElementById('buscaNome').addEventListener('input', aplicarFiltros);
      document.getElementById('buscaSegmento').addEventListener('change', aplicarFiltros);

      document.addEventListener('DOMContentLoaded', async () => {
        await carregarEmpresas();
      });

      function toggleMenu() {
        document.querySelector("nav ul").classList.toggle("show");
      }
    </script>
  </body>
  </html>